import{r as p,S as x,j as e,f as b}from"./index-BPohQp6g.js";const B=(s,n,i)=>{const a=p.useCallback(async()=>{(await x.fire({title:i("confirmResetGame"),text:i("resetGameWarning"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff4757",cancelButtonColor:"#747d8c",confirmButtonText:i("confirmReset"),cancelButtonText:i("cancel"),reverseButtons:!0})).isConfirmed&&(s(),x.fire({title:i("gameReset"),text:i("newGameStarted"),icon:"success",timer:2e3,showConfirmButton:!1}))},[s,i]),r=p.useCallback(async()=>{(await x.fire({title:i("confirmRestartGame"),text:i("restartGameWarning"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#ff4757",cancelButtonColor:"#747d8c",confirmButtonText:i("confirmRestart"),cancelButtonText:i("cancel"),reverseButtons:!0})).isConfirmed&&(n(),x.fire({title:i("gameRestarted"),text:i("freshGameStarted"),icon:"success",timer:2e3,showConfirmButton:!1}))},[n,i]);return{showResetConfirmation:a,showRestartConfirmation:r}},A=({startNewGame:s,t:n})=>e.jsxs("div",{className:"start-screen",children:[e.jsxs("p",{className:"description",children:[n("description"),e.jsx("br",{}),e.jsx("strong",{children:n("rules")}),n("rulesDetail"),e.jsx("br",{}),e.jsx("strong",{children:n("aExplanation")}),e.jsx("br",{}),e.jsx("strong",{children:n("bExplanation")})]}),e.jsx("button",{className:"start-button",onClick:s,children:n("startGame")})]}),w=({computerGuess:s,playerFeedback:n,onFeedbackClick:i,onSubmit:a,t:r})=>e.jsxs("div",{className:"feedback-section",children:[e.jsxs("h3",{children:[r("computerGuess"),s]}),e.jsx("p",{className:"feedback-hint",children:r("feedbackHint")}),e.jsxs("div",{className:"feedback-form",children:[e.jsx("div",{className:"feedback-inputs",children:e.jsxs("div",{className:"feedback-display",children:[e.jsxs("div",{className:"feedback-element-group",children:[e.jsx("button",{className:"arrow-button up",onClick:()=>{const t=(n.A+1)%5;i("A",t)},title:r("increaseValue"),children:"▲"}),e.jsx("div",{className:"feedback-element clickable",onClick:()=>{const t=(n.A+1)%5;i("A",t)},children:n.A}),e.jsx("button",{className:"arrow-button down",onClick:()=>{const t=n.A===0?4:n.A-1;i("A",t)},title:r("decreaseValue"),children:"▼"})]}),e.jsx("span",{className:"feedback-element static",children:"A"}),e.jsxs("div",{className:"feedback-element-group",children:[e.jsx("button",{className:"arrow-button up",onClick:()=>{const t=(n.B+1)%5;i("B",t)},title:r("increaseValue"),children:"▲"}),e.jsx("div",{className:"feedback-element clickable",onClick:()=>{const t=(n.B+1)%5;i("B",t)},children:n.B}),e.jsx("button",{className:"arrow-button down",onClick:()=>{const t=n.B===0?4:n.B-1;i("B",t)},title:r("decreaseValue"),children:"▼"})]}),e.jsx("span",{className:"feedback-element static",children:"B"})]})}),e.jsx("button",{onClick:a,className:"feedback-button",disabled:!1,children:r("submitFeedback")})]})]}),R=(s,n,i)=>{const a=p.useCallback(l=>{const u=new Array(4).fill("");for(let c=0;c<Math.min(l.length,4);c++)l[c]&&l[c]!==" "&&(u[c]=l[c]);return u},[]),r=p.useCallback(l=>{let u="";for(let c=0;c<4;c++)if(l[c]){for(;u.length<c;)u+=" ";u+=l[c]}return u},[]),t=p.useCallback((l,u)=>{const c=u.replace(/\D/g,"").slice(-1),f=a(s);f[l]=c;const o=r(f);if(n(o),c&&l<3){const m=document.getElementById(`digit-${l+1}`);m&&m.focus()}},[s,n,a,r]),h=p.useCallback((l,u)=>{if(u.key==="Backspace"){const c=s.padEnd(4," ");if(!c[l]||c[l]===" "){if(l>0){const f=document.getElementById(`digit-${l-1}`);f&&(f.focus(),t(l-1,""))}}else t(l,"");u.preventDefault()}else if(u.key==="Enter")i();else if(u.key==="ArrowLeft"&&l>0){const c=document.getElementById(`digit-${l-1}`);c&&c.focus()}else if(u.key==="ArrowRight"&&l<3){const c=document.getElementById(`digit-${l+1}`);c&&c.focus()}},[s,t,i]);return{handleDigitChange:t,handleDigitKeyDown:h}},I=({playerGuess:s,updatePlayerGuess:n,handlePlayerGuess:i,disabled:a,isPlayerTurn:r,t})=>{const h=p.useRef(null),{handleDigitChange:l,handleDigitKeyDown:u}=R(s,n,i);p.useEffect(()=>{r&&!a&&h.current&&h.current.focus()},[r,a]);const c=s.replace(/\s/g,"").length,f=c===4;return e.jsxs("div",{className:"digit-inputs",role:"group","aria-label":t("digitInputsLabel"),"aria-describedby":"digit-inputs-help",children:[e.jsx("div",{id:"digit-inputs-help",className:"sr-only",children:t("digitInputsHelp")}),[0,1,2,3].map(o=>e.jsx("input",{id:`digit-${o}`,ref:o===0?h:null,type:"text",inputMode:"numeric",pattern:"[0-9]",value:s[o]&&s[o]!==" "?s[o]:"",onChange:m=>l(o,m.target.value),onKeyDown:m=>u(o,m),className:"digit-input",disabled:a,maxLength:1,placeholder:"?","aria-label":t("digitPosition",{position:o+1}),"aria-describedby":`digit-${o}-status`,"aria-required":"true","aria-invalid":!f&&r?"false":void 0,autoComplete:"off"},o)),e.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",children:f?t("allDigitsEntered"):t("digitsRemaining",{remaining:4-c})})]})},D=({playerHistory:s,computerHistory:n,t:i})=>{const a=p.useRef(null),r=p.useRef(null);return p.useEffect(()=>{a.current&&s.length>0&&(a.current.scrollTop=a.current.scrollHeight)},[s]),p.useEffect(()=>{r.current&&n.length>0&&(r.current.scrollTop=r.current.scrollHeight)},[n]),e.jsxs("div",{className:"history-container",children:[e.jsxs("div",{className:"history-section",children:[e.jsx("h3",{className:"history-title",children:i("playerHistory")}),e.jsx("div",{className:"history-list",ref:a,children:s.map((t,h)=>e.jsxs("div",{className:`item-base history-item ${t.isCorrect?"correct":""}`,children:[e.jsx("span",{className:"ordinal-base history-ordinal",children:h+1}),e.jsxs("div",{className:"content-base history-content",children:[e.jsx("span",{className:"history-guess",children:t.guess}),e.jsx("span",{className:"history-result",children:b(t.result)})]})]},h))})]}),e.jsxs("div",{className:"history-section",children:[e.jsx("h3",{className:"history-title",children:i("computerHistory")}),e.jsx("div",{className:"history-list",ref:r,children:n.map((t,h)=>e.jsxs("div",{className:`item-base history-item ${t.isCorrect?"correct":""}`,children:[e.jsx("span",{className:"ordinal-base history-ordinal",children:h+1}),e.jsxs("div",{className:"content-base history-content",children:[e.jsx("span",{className:"history-guess",children:t.guess}),e.jsx("span",{className:"history-result",children:b(t.result)})]})]},h))})]})]})},E=({startNewGame:s,t:n})=>e.jsxs("div",{className:"win-section",children:[e.jsx("p",{className:"win-message",children:n("gameOver")}),e.jsx("button",{className:"restart-button",onClick:s,children:n("playAgain")})]}),T=({history:s,correctHistoryFeedback:n,cancelFeedbackCorrection:i,t:a})=>{const[r,t]=p.useState(null),[h,l]=p.useState({A:"",B:""}),u=o=>{t(o);const m=s[o];l({A:m.result.A.toString(),B:m.result.B.toString()})},c=(o,m)=>{l(j=>({...j,[o]:m.toString()}))},f=()=>{r!==null&&n(r,parseInt(h.A),parseInt(h.B))};return e.jsxs("div",{className:"correction-panel",children:[e.jsx("h3",{className:"correction-title",children:a("correctFeedback")}),e.jsx("p",{className:"correction-hint",children:a("selectCorrection")}),e.jsx("div",{className:"correction-history",children:s.map((o,m)=>e.jsxs("div",{className:`item-base correction-item ${r===m?"selected":""}`,onClick:()=>u(m),children:[e.jsx("span",{className:"ordinal-base correction-ordinal",children:m+1}),e.jsxs("div",{className:"content-base correction-content",children:[e.jsx("span",{className:"correction-guess",children:o.guess}),e.jsx("span",{className:"correction-result",children:b(o.result)})]})]},m))}),r!==null&&e.jsxs("div",{className:"correction-editor",children:[e.jsxs("h4",{children:[a("correctFeedbackFor",{guess:s[r].guess}),":"]}),e.jsx("div",{className:"correction-inputs",children:e.jsxs("div",{className:"feedback-display",children:[e.jsx("button",{className:"feedback-element clickable",onClick:()=>{const m=(parseInt(h.A||"0")+1)%5;c("A",m)},children:h.A||"0"}),e.jsx("span",{className:"feedback-element static",children:"A"}),e.jsx("button",{className:"feedback-element clickable",onClick:()=>{const m=(parseInt(h.B||"0")+1)%5;c("B",m)},children:h.B||"0"}),e.jsx("span",{className:"feedback-element static",children:"B"})]})}),e.jsxs("div",{className:"correction-actions",children:[e.jsx("button",{className:"confirm-correction-button",onClick:f,disabled:!1,children:a("confirmCorrection")}),e.jsx("button",{className:"cancel-correction-button",onClick:i,children:a("cancelCorrection")})]})]})]})},H=({gameState:s,history:n,computerAI:i,feedbackCorrection:a,startNewGame:r,handlePlayerGuess:t,handleFeedbackSubmit:h,updatePlayerGuess:l,updatePlayerFeedback:u,getMessageType:c,startFeedbackCorrection:f,resetGame:o,correctHistoryFeedback:m,cancelFeedbackCorrection:j,handleHintCheck:g,t:d})=>{const{showResetConfirmation:N,showRestartConfirmation:v}=B(o,r,d),k=p.useCallback((C,y)=>{u(C,y.toString())},[u]);return e.jsxs("div",{className:"main-container",children:[e.jsx("h1",{className:"title",children:d("title")}),s.gameStarted?e.jsxs("div",{className:"game-screen",children:[e.jsxs("div",{className:"game-info",children:[e.jsxs("p",{className:"attempts",children:[d("playerAttempts"),": ",s.playerAttempts," | ",d("computerAttempts"),": ",s.computerAttempts]}),e.jsxs("p",{className:"hint",children:[d("currentTurn"),": ",s.currentTurn==="player"?d("player"):d("computer")]}),e.jsx("button",{className:"restart-link",onClick:v,title:d("restartGame"),children:d("restartGame")})]}),i.showFeedbackForm?e.jsx(w,{computerGuess:i.currentGuess,playerFeedback:i.playerFeedback,onFeedbackClick:k,onSubmit:h,t:d}):e.jsx("div",{className:"guess-section",children:e.jsx("div",{className:"input-section",children:e.jsxs("div",{className:"digit-inputs-and-main-buttons",children:[e.jsx(I,{playerGuess:s.playerGuess,updatePlayerGuess:l,handlePlayerGuess:t,disabled:s.gameWon||s.currentTurn!=="player",isPlayerTurn:s.currentTurn==="player"&&!s.gameWon,t:d}),e.jsxs("div",{className:"main-button-group",children:[e.jsx("button",{onClick:t,className:"game-button guess-button",disabled:s.gameWon||s.currentTurn!=="player"||s.playerGuess.replace(/\s/g,"").length!==4,"aria-describedby":"guess-button-help",children:d("guess")}),e.jsx("div",{id:"guess-button-help",className:"sr-only",children:s.playerGuess.replace(/\s/g,"").length!==4?d("guessButtonDisabledHelp"):d("guessButtonEnabledHelp")}),e.jsxs("button",{onClick:g,className:"game-button hint-button",disabled:s.gameWon||s.currentTurn!=="player"||s.playerGuess.replace(/\s/g,"").length!==4||s.hintsRemaining<=0||n.player.length===0,"aria-describedby":"hint-button-help",title:d("hintButtonTooltip",{remaining:s.hintsRemaining}),children:[d("checkHint")," (",s.hintsRemaining,")"]}),e.jsx("div",{id:"hint-button-help",className:"sr-only",children:d("hintButtonTooltip",{remaining:s.hintsRemaining})})]})]})})}),(s.message||s.messageInfo)&&e.jsxs("div",{className:`message ${c()}`,children:[s.messageInfo?d(s.messageInfo.key,s.messageInfo.params):s.message,a.isActive&&c()==="complaint"&&e.jsxs("div",{className:"correction-buttons",children:[e.jsx("button",{className:"fix-button",onClick:f,children:d("fixFeedback")}),e.jsx("button",{className:"reset-button",onClick:N,children:d("resetGame")})]})]}),a.showHistory&&e.jsx(T,{history:n.computer,correctHistoryFeedback:m,cancelFeedbackCorrection:j,t:d}),e.jsx(D,{playerHistory:n.player,computerHistory:n.computer,t:d}),s.gameWon&&e.jsx(E,{startNewGame:r,t:d})]}):e.jsx(A,{startNewGame:r,t:d})]})};export{H as GameUI};
